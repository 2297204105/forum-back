(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3532c1ae"],{"1ffc":function(t,i,s){},"336c":function(t,i,s){"use strict";var e=s("1ffc"),n=s.n(e);n.a},"4b45":function(t,i,s){},"9ed6":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"login-container"},[s("div",{staticClass:"backgroung",attrs:{id:"myBg"}},[s("canvas",{ref:"myBg",attrs:{id:"canvas"}})]),t._v(" "),s("div",{staticClass:"login"},[s("div",{staticClass:"line"}),t._v(" "),s("div",{staticClass:"login-form"},[t._m(0),t._v(" "),s("div",[s("el-input",{attrs:{placeholder:"登录账号",type:"text",tabindex:"1"},model:{value:t.loginForm.account,callback:function(i){t.$set(t.loginForm,"account",i)},expression:"loginForm.account"}},[s("svg-icon",{attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),t._v(" "),s("div",[s("el-input",{attrs:{type:t.passwordType,placeholder:"登录密码",tabindex:"2"},model:{value:t.loginForm.password,callback:function(i){t.$set(t.loginForm,"password",i)},expression:"loginForm.password"}},[s("svg-icon",{attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"}),t._v(" "),s("span",{attrs:{slot:"suffix"},on:{click:t.showPwd},slot:"suffix"},[s("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1)],1),t._v(" "),t.isRegist?s("div",[s("el-input",{attrs:{type:"text",placeholder:"用户昵称",tabindex:"3"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.handleLogin(i)}},model:{value:t.loginForm.nickname,callback:function(i){t.$set(t.loginForm,"nickname",i)},expression:"loginForm.nickname"}},[s("i",{staticClass:"el-icon-s-promotion",staticStyle:{"font-size":"16px"},attrs:{slot:"prefix"},slot:"prefix"})])],1):t._e(),t._v(" "),s("div",[t.isRegist?t._e():s("el-button",{attrs:{loading:t.loginloading,type:"primary"},on:{click:t.handleLogin}},[t._v("登录")]),t._v(" "),t.isRegist?t._e():s("el-button",{on:{focus:function(i){return t.blur()},click:t.handleRegist}},[t._v("注册")]),t._v(" "),t.isRegist?s("el-button",{attrs:{loading:t.registloading,type:"primary"},on:{click:t.submitRegist}},[t._v("提交")]):t._e(),t._v(" "),t.isRegist?s("el-button",{on:{click:t.cancelRegist}},[t._v("返回")]):t._e()],1)])])])},n=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("img",{attrs:{src:s("146c"),width:"100px"}})])}],o={name:"Login",data:function(){return{isRegist:!1,loginForm:{account:"",password:"",nickname:""},loginloading:!1,registloading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},mounted:function(){var t=this;t.$refs.myBg.width=document.body.clientWidth,t.$refs.myBg.height=document.body.clientHeight,window.onresize=function(){t.$refs.myBg.width=document.body.clientWidth,t.$refs.myBg.height=document.body.clientHeight}},methods:{showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.loginloading=!0,this.$axios({url:"user/login",method:"post",data:{account:this.loginForm.account,password:this.loginForm.password}}).then((function(i){i.data.meta.status?t.$store.dispatch("user/saveUser",i.data.data).then((function(){t.$router.push({path:t.redirect||"/"}),t.loginloading=!1})).catch((function(){t.loginloading=!1})):(t.$message.warning(i.data.meta.info),t.loginloading=!1)}))},handleRegist:function(){this.isRegist=!0},submitRegist:function(){var t=this;this.registloading=!0,this.$axios({url:"user",method:"post",data:this.loginForm}).then((function(i){i.data.meta.status?t.$message.success("注册成功"):t.$message(i.data.meta.info),t.registloading=!1}))},cancelRegist:function(){this.isRegist=!1}}},a=o,r=(s("cb42"),s("336c"),s("2877")),c=Object(r["a"])(a,e,n,!1,null,"a15bf752",null);i["default"]=c.exports},cb42:function(t,i,s){"use strict";var e=s("4b45"),n=s.n(e);n.a}}]);